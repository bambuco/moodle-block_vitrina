{"version":3,"file":"main.min.js","sources":["../src/main.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to initialise the block.\n *\n * @copyright 2023 David Herney @ BambuCo\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/str', 'core/log'], function($, Str, Log) {\n\n    // Load strings.\n    var strings = [];\n    var s = [];\n\n    /**\n     * Load strings from server.\n     */\n    function loadStrings() {\n\n        if (strings.length > 0) {\n\n            strings.forEach(one => {\n                s[one.key] = one.key;\n            });\n\n            Str.get_strings(strings).done(function(results) {\n                var pos = 0;\n                strings.forEach(one => {\n                    s[one.key] = results[pos];\n                    pos++;\n                });\n            }).fail(function(e) {\n                Log.debug('Error loading strings');\n                Log.debug(e);\n            });\n        }\n\n    }\n    // End of Load strings.\n\n    /**\n     * Initialise functions for the detail page block.\n     *\n     */\n    var detail = function() {\n        strings.push({key: 'courselinkcopiedtoclipboard', component: 'block_vitrina'});\n\n        $('input[name=\"courselink\"]').on('click', function() {\n            var $input = $(this);\n            $input.select();\n            document.execCommand(\"copy\");\n\n            var $msg = $('<div class=\"msg-courselink-copy\">' + s.courselinkcopiedtoclipboard + '</div>');\n\n            $input.parent().append($msg);\n            window.setTimeout(function() {\n                $msg.remove();\n            }, 1600);\n        });\n\n        init();\n    };\n\n    /**\n     * Initialise all for the block.\n     *\n     */\n    var init = function() {\n\n        loadStrings();\n\n        $('[data-vitrina-toggle]').on('click', function() {\n            var $this = $(this);\n            var cssclass = $this.attr('data-vitrina-toggle');\n            var target = $this.attr('data-target');\n\n            $(target).toggleClass(cssclass);\n        });\n\n        $('.block_vitrina-content').each(function() {\n            var $blockcontent = $(this);\n\n            // Tabs.\n            $blockcontent.find('.block_vitrina-tabs').each(function() {\n                var $tabs = $(this);\n                var tabslist = [];\n\n                $tabs.find('[data-ref]').each(function() {\n                    var $tab = $(this);\n                    tabslist.push($tab);\n\n                    $tab.on('click', function() {\n                        tabslist.forEach(one => {\n                            $(one.data('ref')).removeClass('active');\n                        });\n\n                        $tabs.find('.active[data-ref]').removeClass('active');\n                        $tab.addClass('active');\n                        $($tab.data('ref')).addClass('active');\n                    });\n                });\n\n                // Load dynamic buttons.\n                $blockcontent.find('[data-vitrina-tab]').each(function() {\n                    var $button = $(this);\n\n                    $button.on('click', function() {\n                        var key = '.tab-' + $button.data('vitrina-tab');\n\n                        tabslist.forEach($tab => {\n                            if ($tab.data('ref').indexOf(key) >= 0) {\n                                $tab.trigger('click');\n                            }\n                        });\n                    });\n                });\n            });\n        });\n    };\n\n    return {\n        init: init,\n        detail: detail\n    };\n});\n"],"names":["define","$","Str","Log","strings","s","init","length","forEach","one","key","get_strings","done","results","pos","fail","e","debug","on","$this","this","cssclass","attr","target","toggleClass","each","$blockcontent","find","$tabs","tabslist","$tab","push","data","removeClass","addClass","$button","indexOf","trigger","detail","component","$input","select","document","execCommand","$msg","courselinkcopiedtoclipboard","parent","append","window","setTimeout","remove"],"mappings":";;;;;;AAsBAA,4BAAO,CAAC,SAAU,WAAY,aAAa,SAASC,EAAGC,IAAKC,SAGpDC,QAAU,GACVC,EAAI,OAuDJC,KAAO,WAhDHF,QAAQG,OAAS,IAEjBH,QAAQI,SAAQ,SAAAC,KACZJ,EAAEI,IAAIC,KAAOD,IAAIC,OAGrBR,IAAIS,YAAYP,SAASQ,MAAK,SAASC,aAC/BC,IAAM,EACVV,QAAQI,SAAQ,SAAAC,KACZJ,EAAEI,IAAIC,KAAOG,QAAQC,KACrBA,YAELC,MAAK,SAASC,GACbb,IAAIc,MAAM,yBACVd,IAAIc,MAAMD,OAsClBf,EAAE,yBAAyBiB,GAAG,SAAS,eAC/BC,MAAQlB,EAAEmB,MACVC,SAAWF,MAAMG,KAAK,uBACtBC,OAASJ,MAAMG,KAAK,eAExBrB,EAAEsB,QAAQC,YAAYH,aAG1BpB,EAAE,0BAA0BwB,MAAK,eACzBC,cAAgBzB,EAAEmB,MAGtBM,cAAcC,KAAK,uBAAuBF,MAAK,eACvCG,MAAQ3B,EAAEmB,MACVS,SAAW,GAEfD,MAAMD,KAAK,cAAcF,MAAK,eACtBK,KAAO7B,EAAEmB,MACbS,SAASE,KAAKD,MAEdA,KAAKZ,GAAG,SAAS,WACbW,SAASrB,SAAQ,SAAAC,KACbR,EAAEQ,IAAIuB,KAAK,QAAQC,YAAY,aAGnCL,MAAMD,KAAK,qBAAqBM,YAAY,UAC5CH,KAAKI,SAAS,UACdjC,EAAE6B,KAAKE,KAAK,QAAQE,SAAS,gBAKrCR,cAAcC,KAAK,sBAAsBF,MAAK,eACtCU,QAAUlC,EAAEmB,MAEhBe,QAAQjB,GAAG,SAAS,eACZR,IAAM,QAAUyB,QAAQH,KAAK,eAEjCH,SAASrB,SAAQ,SAAAsB,MACTA,KAAKE,KAAK,OAAOI,QAAQ1B,MAAQ,GACjCoB,KAAKO,QAAQ,+BASlC,CACH/B,KAAMA,KACNgC,OA9ES,WACTlC,QAAQ2B,KAAK,CAACrB,IAAK,8BAA+B6B,UAAW,kBAE7DtC,EAAE,4BAA4BiB,GAAG,SAAS,eAClCsB,OAASvC,EAAEmB,MACfoB,OAAOC,SACPC,SAASC,YAAY,YAEjBC,KAAO3C,EAAE,oCAAsCI,EAAEwC,4BAA8B,UAEnFL,OAAOM,SAASC,OAAOH,MACvBI,OAAOC,YAAW,WACdL,KAAKM,WACN,SAGP5C"}